{"version":3,"sources":["../../../src/components/VDatePicker/VDatePickerDateTable.ts"],"names":[],"mappings":"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","sourcesContent":["// Mixins\nimport DatePickerTable from './mixins/date-picker-table'\n\n// Utils\nimport { weekNumber } from '../../util/dateTimeUtils'\nimport { pad, createNativeLocaleFormatter, monthChange } from './util'\nimport { createRange } from '../../util/helpers'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode, VNodeChildren, PropType } from 'vue'\nimport { DatePickerFormatter } from 'vuetify/types'\n\nexport default mixins(\n  DatePickerTable\n/* @vue/component */\n).extend({\n  name: 'v-date-picker-date-table',\n\n  props: {\n    firstDayOfWeek: {\n      type: [String, Number],\n      default: 0,\n    },\n    localeFirstDayOfYear: {\n      type: [String, Number],\n      default: 0,\n    },\n    showAdjacentMonths: Boolean,\n    showWeek: Boolean,\n    weekdayFormat: Function as PropType<DatePickerFormatter | undefined>,\n  },\n\n  computed: {\n    formatter (): DatePickerFormatter {\n      return this.format || createNativeLocaleFormatter(this.currentLocale, { day: 'numeric', timeZone: 'UTC' }, { start: 8, length: 2 })\n    },\n    weekdayFormatter (): DatePickerFormatter | undefined {\n      return this.weekdayFormat || createNativeLocaleFormatter(this.currentLocale, { weekday: 'narrow', timeZone: 'UTC' })\n    },\n    weekDays (): string[] {\n      const first = parseInt(this.firstDayOfWeek, 10)\n\n      return this.weekdayFormatter\n        ? createRange(7).map(i => this.weekdayFormatter!(`2017-01-${first + i + 15}`)) // 2017-01-15 is Sunday\n        : createRange(7).map(i => ['S', 'M', 'T', 'W', 'T', 'F', 'S'][(i + first) % 7])\n    },\n  },\n\n  methods: {\n    calculateTableDate (delta: number) {\n      return monthChange(this.tableDate, Math.sign(delta || 1))\n    },\n    genTHead () {\n      const days = this.weekDays.map(day => this.$createElement('th', day))\n      if (this.showWeek) {\n        days.unshift(this.$createElement('th'))\n      }\n\n      return this.$createElement('thead', this.genTR(days))\n    },\n    // Returns number of the days from the firstDayOfWeek to the first day of the current month\n    weekDaysBeforeFirstDayOfTheMonth () {\n      const firstDayOfTheMonth = new Date(`${this.displayedYear}-${pad(this.displayedMonth + 1)}-01T00:00:00+00:00`)\n      const weekDay = firstDayOfTheMonth.getUTCDay()\n\n      return (weekDay - parseInt(this.firstDayOfWeek) + 7) % 7\n    },\n    getWeekNumber (dayInMonth: number) {\n      return weekNumber(\n        this.displayedYear,\n        this.displayedMonth,\n        dayInMonth,\n        parseInt(this.firstDayOfWeek),\n        parseInt(this.localeFirstDayOfYear)\n      )\n    },\n    genWeekNumber (weekNumber: number) {\n      return this.$createElement('td', [\n        this.$createElement('small', {\n          staticClass: 'v-date-picker-table--date__week',\n        }, String(weekNumber).padStart(2, '0')),\n      ])\n    },\n    // eslint-disable-next-line max-statements\n    genTBody () {\n      const children = []\n      const daysInMonth = new Date(this.displayedYear, this.displayedMonth + 1, 0).getDate()\n      let rows = []\n      let day = this.weekDaysBeforeFirstDayOfTheMonth()\n\n      if (this.showWeek) {\n        rows.push(this.genWeekNumber(this.getWeekNumber(1)))\n      }\n\n      const prevMonthYear = this.displayedMonth ? this.displayedYear : this.displayedYear - 1\n      const prevMonth = (this.displayedMonth + 11) % 12\n      const firstDayFromPreviousMonth = new Date(this.displayedYear, this.displayedMonth, 0).getDate()\n      const cellsInRow = this.showWeek ? 8 : 7\n\n      while (day--) {\n        const date = `${prevMonthYear}-${pad(prevMonth + 1)}-${pad(firstDayFromPreviousMonth - day)}`\n\n        rows.push(this.$createElement('td', this.showAdjacentMonths ? [\n          this.genButton(date, true, 'date', this.formatter, true),\n        ] : []))\n      }\n\n      for (day = 1; day <= daysInMonth; day++) {\n        const date = `${this.displayedYear}-${pad(this.displayedMonth + 1)}-${pad(day)}`\n\n        rows.push(this.$createElement('td', [\n          this.genButton(date, true, 'date', this.formatter),\n        ]))\n\n        if (rows.length % cellsInRow === 0) {\n          children.push(this.genTR(rows))\n          rows = []\n          if (this.showWeek && (day < daysInMonth || this.showAdjacentMonths)) {\n            rows.push(this.genWeekNumber(this.getWeekNumber(day + 7)))\n          }\n        }\n      }\n\n      const nextMonthYear = this.displayedMonth === 11 ? this.displayedYear + 1 : this.displayedYear\n      const nextMonth = (this.displayedMonth + 1) % 12\n      let nextMonthDay = 1\n\n      while (rows.length < cellsInRow) {\n        const date = `${nextMonthYear}-${pad(nextMonth + 1)}-${pad(nextMonthDay++)}`\n\n        rows.push(this.$createElement('td', this.showAdjacentMonths ? [\n          this.genButton(date, true, 'date', this.formatter, true),\n        ] : []))\n      }\n\n      if (rows.length) {\n        children.push(this.genTR(rows))\n      }\n\n      return this.$createElement('tbody', children)\n    },\n    genTR (children: VNodeChildren) {\n      return [this.$createElement('tr', children)]\n    },\n  },\n\n  render (): VNode {\n    return this.genTable('v-date-picker-table v-date-picker-table--date', [\n      this.genTHead(),\n      this.genTBody(),\n    ], this.calculateTableDate)\n  },\n})\n"],"sourceRoot":"","file":"VDatePickerDateTable.js"}