{"version":3,"sources":["../../../src/components/VVirtualScroll/VVirtualScroll.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VVirtualScroll.sass'\n\n// Mixins\nimport Measurable from '../../mixins/measurable'\n\n// Directives\nimport Scroll from '../../directives/scroll'\n\n// Utilities\nimport {\n  convertToUnit,\n  getSlot,\n} from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\n\nexport default Measurable.extend({\n  name: 'v-virtual-scroll',\n\n  directives: { Scroll },\n\n  props: {\n    bench: {\n      type: [Number, String],\n      default: 0,\n    },\n    itemHeight: {\n      type: [Number, String],\n      required: true,\n    },\n    items: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<any[]>,\n  },\n\n  data: () => ({\n    first: 0,\n    last: 0,\n    scrollTop: 0,\n  }),\n\n  computed: {\n    __bench (): number {\n      return parseInt(this.bench, 10)\n    },\n    __itemHeight (): number {\n      return parseInt(this.itemHeight, 10)\n    },\n    firstToRender (): number {\n      return Math.max(0, this.first - this.__bench)\n    },\n    lastToRender (): number {\n      return Math.min(this.items.length, this.last + this.__bench)\n    },\n  },\n\n  watch: {\n    height: 'onScroll',\n    itemHeight: 'onScroll',\n  },\n\n  mounted () {\n    this.last = this.getLast(0)\n  },\n\n  methods: {\n    getChildren (): VNode[] {\n      return this.items.slice(\n        this.firstToRender,\n        this.lastToRender,\n      ).map(this.genChild)\n    },\n    genChild (item: any, index: number) {\n      index += this.firstToRender\n\n      const top = convertToUnit(index * this.__itemHeight)\n\n      return this.$createElement('div', {\n        staticClass: 'v-virtual-scroll__item',\n        style: { top },\n        key: index,\n      }, getSlot(this, 'default', { index, item }))\n    },\n    getFirst (): number {\n      return Math.floor(this.scrollTop / this.__itemHeight)\n    },\n    getLast (first: number): number {\n      const height = parseInt(this.height || 0, 10) || this.$el.clientHeight\n\n      return first + Math.ceil(height / this.__itemHeight)\n    },\n    onScroll () {\n      this.scrollTop = this.$el.scrollTop\n      this.first = this.getFirst()\n      this.last = this.getLast(this.first)\n    },\n  },\n\n  render (h): VNode {\n    const content = h('div', {\n      staticClass: 'v-virtual-scroll__container',\n      style: {\n        height: convertToUnit((this.items.length * this.__itemHeight)),\n      },\n    }, this.getChildren())\n\n    return h('div', {\n      staticClass: 'v-virtual-scroll',\n      style: this.measurableStyles,\n      directives: [{\n        name: 'scroll',\n        modifiers: { self: true },\n        value: this.onScroll,\n      }],\n      on: this.$listeners,\n    }, [content])\n  },\n})\n"],"sourceRoot":"","file":"VVirtualScroll.js"}