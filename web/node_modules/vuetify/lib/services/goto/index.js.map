{"version":3,"sources":["../../../src/services/goto/index.ts"],"names":[],"mappings":"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","sourcesContent":["// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport * as easingPatterns from './easing-patterns'\nimport {\n  getContainer,\n  getOffset,\n} from './util'\n\n// Types\nimport { GoToOptions, VuetifyGoToTarget } from 'vuetify/types/services/goto'\n\nimport { VuetifyServiceContract } from 'vuetify/types/services'\n\nexport default function goTo (\n  _target: VuetifyGoToTarget,\n  _settings: GoToOptions = {}\n): Promise<number> {\n  const settings: GoToOptions = {\n    container: (document.scrollingElement as HTMLElement | null) || document.body || document.documentElement,\n    duration: 500,\n    offset: 0,\n    easing: 'easeInOutCubic',\n    appOffset: true,\n    ..._settings,\n  }\n  const container = getContainer(settings.container)\n\n  /* istanbul ignore else */\n  if (settings.appOffset && goTo.framework.application) {\n    const isDrawer = container.classList.contains('v-navigation-drawer')\n    const isClipped = container.classList.contains('v-navigation-drawer--clipped')\n    const { bar, top } = goTo.framework.application as any\n\n    settings.offset += bar\n    /* istanbul ignore else */\n    if (!isDrawer || isClipped) settings.offset += top\n  }\n\n  const startTime = performance.now()\n\n  let targetLocation: number\n  if (typeof _target === 'number') {\n    targetLocation = getOffset(_target) - settings.offset!\n  } else {\n    targetLocation = getOffset(_target) - getOffset(container) - settings.offset!\n  }\n\n  const startLocation = container.scrollTop\n  if (targetLocation === startLocation) return Promise.resolve(targetLocation)\n\n  const ease = typeof settings.easing === 'function'\n    ? settings.easing\n    : easingPatterns[settings.easing!]\n  /* istanbul ignore else */\n  if (!ease) throw new TypeError(`Easing function \"${settings.easing}\" not found.`)\n\n  // Cannot be tested properly in jsdom\n  /* istanbul ignore next */\n  return new Promise(resolve => requestAnimationFrame(function step (currentTime: number) {\n    const timeElapsed = currentTime - startTime\n    const progress = Math.abs(settings.duration ? Math.min(timeElapsed / settings.duration, 1) : 1)\n\n    container.scrollTop = Math.floor(startLocation + (targetLocation - startLocation) * ease(progress))\n\n    const clientHeight = container === document.body ? document.documentElement.clientHeight : container.clientHeight\n    const reachBottom = clientHeight + container.scrollTop >= container.scrollHeight\n    if (\n      progress === 1 ||\n      // Need to go lower but reach bottom\n      (targetLocation > container.scrollTop && reachBottom)\n    ) {\n      return resolve(targetLocation)\n    }\n\n    requestAnimationFrame(step)\n  }))\n}\n\ngoTo.framework = {} as Record<string, VuetifyServiceContract>\ngoTo.init = () => {}\n\nexport class Goto extends Service {\n  public static property: 'goTo' = 'goTo'\n\n  constructor () {\n    super()\n\n    return goTo\n  }\n}\n"],"sourceRoot":"","file":"index.js"}