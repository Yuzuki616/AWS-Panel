{"remainingRequest":"/home/chengege/AWS-Panel-master/web/node_modules/thread-loader/dist/cjs.js!/home/chengege/AWS-Panel-master/web/node_modules/babel-loader/lib/index.js!/home/chengege/AWS-Panel-master/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chengege/AWS-Panel-master/web/src/views/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/chengege/AWS-Panel-master/web/src/views/User.vue","mtime":1652337639000},{"path":"/home/chengege/AWS-Panel-master/web/babel.config.js","mtime":1652337639000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2NoZW5nZWdlL0FXUy1QYW5lbC1tYXN0ZXIvd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJy4uL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndXNlcicsCiAgbWV0YUluZm86IHsKICAgIHRpdGxlOiAn55So5oi35Lit5b+DIC0gQVdTIFBhbmVsJwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICfmnKrnn6XnlKjmiLcnLAogICAgICBvbGRQdzogJycsCiAgICAgIG5ld1B3OiAnJywKICAgICAgY29uZmlybU5ld1B3OiAnJywKICAgICAgZm9ybVJlcXVpcmVkOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICLlv4XloavpobnvvIEiOwogICAgICB9XSwKICAgICAgY29uZmlybVB3UnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgIuW/heWhq+mhuSEiOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2ID09PSBfdGhpcy5uZXdQdyB8fCAi5a+G56CB5LiN5Yy56YWNIjsKICAgICAgfV0sCiAgICAgIGNoYW5nZUxvYWRpbmc6IGZhbHNlLAogICAgICBhZGRTZWNyZXREaWFsb2c6IGZhbHNlLAogICAgICBzZWNyZXROYW1lOiBudWxsLAogICAgICBzZWNyZXRJZDogbnVsbCwKICAgICAgc2VjcmV0OiBudWxsLAogICAgICBhZGRMb2FkaW5nOiBmYWxzZSwKICAgICAgaGVhZGVyczogW3sKICAgICAgICB0ZXh0OiAi5pON5L2cIiwKICAgICAgICB2YWx1ZTogImFjdGlvbiIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICLlr4bpkqXlkI3np7AiLAogICAgICAgIHZhbHVlOiAibmFtZSIKICAgICAgfV0sCiAgICAgIHNlY3JldHM6IFtdLAogICAgICBzZWNyZXRzTG9hZGluZzogZmFsc2UsCiAgICAgIG1lc3NhZ2VUZXh0OiAnJywKICAgICAgbWVzc2FnZTogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgnL2FwaS92MS9Vc2VyL0luZm8nLCB7CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMyLnVzZXJuYW1lID0gcmVzcG9uc2UuZGF0YS5uYW1lOwogICAgfSk7CiAgICBheGlvcy5nZXQoJy9hcGkvdjEvU2VjcmV0L0xpc3QnLCB7CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgdmFyIHRtcCA9IFtdOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3BvbnNlLmRhdGEuZGF0YSksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICB0bXAucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IHYubmFtZSwKICAgICAgICAgICAgaWQ6IHYuaWQsCiAgICAgICAgICAgIHNlY3JldDogdi5zZWNyZXQKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMyLnNlY3JldHMgPSB0bXA7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnNlY3JldHNMb2FkaW5nID0gdHJ1ZTsKICAgICAgYXhpb3MuZ2V0KCcvYXBpL3YxL1NlY3JldC9MaXN0JywgewogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciB0bXAgPSBbXTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgICAgICB0bXAucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogdi5uYW1lLAogICAgICAgICAgICAgIGlkOiB2LmlkLAogICAgICAgICAgICAgIHNlY3JldDogdi5zZWNyZXQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF90aGlzMy5zZWNyZXRzID0gdG1wOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuc2VjcmV0c0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlUGFzc3dvcmQ6IGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLiRyZWZzLmNoYW5nZUZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHRoaXMuY2hhbmdlTG9hZGluZyA9IHRydWU7CiAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBkYXRhLmFwcGVuZCgnb2xkUGFzc3dvcmQnLCB0aGlzLm9sZFB3KTsKICAgICAgICBkYXRhLmFwcGVuZCgnbmV3UGFzc3dvcmQnLCB0aGlzLm5ld1B3KTsKICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3YxL1VzZXIvQ2hhbmdlUGFzc3dvcmQnLCBkYXRhLCB7CiAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzNC4kY29va2llLmRlbGV0ZSgndXNlcnNlc3Npb24nKTsKCiAgICAgICAgICAgIF90aGlzNC5tZXNzYWdlVGV4dCA9ICfkv67mlLnmiJDlip/vvIEnOwogICAgICAgICAgICBfdGhpczQubWVzc2FnZSA9IHRydWU7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzNC4kcm91dGVyLnB1c2goIi9Mb2dpbiIpOwogICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzNC5tZXNzYWdlVGV4dCA9IHJlc3BvbnNlLmRhdGEubXNnOwogICAgICAgICAgfQogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LiRyZWZzLmNoYW5nZUZvcm0ucmVzZXQoKTsKCiAgICAgICAgICBfdGhpczQuY2hhbmdlTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXM0Lm1lc3NhZ2UgPSB0cnVlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlU2VjcmV0czogZnVuY3Rpb24gZGVsZXRlU2VjcmV0cyhpdGVtKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZGF0YS5hcHBlbmQoJ25hbWUnLCBpdGVtLm5hbWUpOwogICAgICBheGlvcy5wb3N0KCdhcGkvdjEvU2VjcmV0L0RlbGV0ZScsIGRhdGEsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzNS5tZXNzYWdlVGV4dCA9ICfliKDpmaTmiJDlip/vvIEnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczUubWVzc2FnZVRleHQgPSByZXNwb25zZS5kYXRhLm1zZzsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXM1Lm1lc3NhZ2UgPSB0cnVlOwoKICAgICAgICBfdGhpczUucmVmcmVzaCgpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRTZWNyZXQ6IGZ1bmN0aW9uIGFkZFNlY3JldCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBkYXRhLmFwcGVuZCgnbmFtZScsIHRoaXMuc2VjcmV0TmFtZSk7CiAgICAgIGRhdGEuYXBwZW5kKCdpZCcsIHRoaXMuc2VjcmV0SWQpOwogICAgICBkYXRhLmFwcGVuZCgnc2VjcmV0JywgdGhpcy5zZWNyZXQpOwogICAgICBheGlvcy5wb3N0KCdhcGkvdjEvU2VjcmV0L0FkZCcsIGRhdGEsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzNi5tZXNzYWdlVGV4dCA9ICfmt7vliqDmiJDlip8nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczYubWVzc2FnZVRleHQgPSByZXNwb25zZS5kYXRhLm1zZzsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi4kcmVmcy5hZGRGb3JtLnJlc2V0KCk7CgogICAgICAgIF90aGlzNi5hZGRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXM2LmFkZFNlY3JldERpYWxvZyA9IGZhbHNlOwogICAgICAgIF90aGlzNi5tZXNzYWdlID0gdHJ1ZTsKCiAgICAgICAgX3RoaXM2LnJlZnJlc2goKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AAEA;EACAA,YADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IAAA;;IACA;MACAC,gBADA;MAEAC,SAFA;MAGAC,SAHA;MAIAC,gBAJA;MAKAC,eACA;QAAA;MAAA,CADA,CALA;MAQAC,iBACA;QAAA;MAAA,CADA,EAEA;QAAA;MAAA,CAFA,CARA;MAYAC,oBAZA;MAaAC,sBAbA;MAcAC,gBAdA;MAeAC,cAfA;MAgBAC,YAhBA;MAiBAC,iBAjBA;MAkBAC,UACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,CAlBA;MAsBAC,WAtBA;MAuBAC,qBAvBA;MAwBAC,eAxBA;MAyBAC,cAzBA;MA0BAC;IA1BA;EA4BA,CAlCA;EAmCAC,OAnCA,qBAmCA;IAAA;;IACAC;MAAAC;IAAA;MACA;IACA,CAFA;IAGAD;MAAAC;IAAA;MACA;;MADA,2CAEAC,kBAFA;MAAA;;MAAA;QAEA;UAAA;UACAC;YACA5B,YADA;YAEA6B,QAFA;YAGAf;UAHA;UAKA;QACA;MATA;QAAA;MAAA;QAAA;MAAA;IAUA,CAVA;EAWA,CAlDA;EAmDAgB;IACAC,OADA,qBACA;MAAA;;MACA;MACAN;QAAAC;MAAA;QACA;;QACA;UACAC;YACAC;cACA5B,YADA;cAEA6B,QAFA;cAGAf;YAHA;UAKA,CANA;QAOA;;QACA;MACA,CAZA,EAYAkB,OAZA,CAYA;QACA;MACA,CAdA;IAeA,CAlBA;IAmBAC,cAnBA,4BAmBA;MAAA;;MACA;QACA;QACA;QACA9B;QACAA;QACAsB;UAAAC;QAAA;UACA;YACA;;YACA;YACA;YACAQ;cACA;YACA,CAFA,EAEA,IAFA;UAGA,CAPA,MAOA;YACA;UACA;QACA,CAXA,EAWAF,OAXA,CAWA;UACA;;UACA;UACA;QACA,CAfA;MAgBA;IACA,CA1CA;IA2CAG,aA3CA,yBA2CAC,IA3CA,EA2CA;MAAA;;MACA;MACA;MACAjC;MACAsB;QAAAC;MAAA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA,EAMAM,OANA,CAMA;QACA;QACA;;QACA;MACA,CAVA;IAWA,CA1DA;IA2DAK,SA3DA,uBA2DA;MAAA;;MACA;MACA;MACAlC;MACAA;MACAA;MACAsB;QAAAC;MAAA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CANA,EAMAM,OANA,CAMA;QACA;;QACA;QACA;QACA;;QACA;MACA,CAZA;IAaA;EA9EA;AAnDA","names":["name","metaInfo","title","data","username","oldPw","newPw","confirmNewPw","formRequired","confirmPwRules","changeLoading","addSecretDialog","secretName","secretId","secret","addLoading","headers","text","value","secrets","secretsLoading","messageText","message","loading","mounted","axios","withCredentials","response","tmp","id","methods","refresh","finally","changePassword","setTimeout","deleteSecrets","item","addSecret"],"sourceRoot":"src/views","sources":["User.vue"],"sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row class=\"mb-5\">\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              用户中心\n            </v-card-title>\n            <v-card-subtitle>\n              User Center\n            </v-card-subtitle>\n            <v-card-text>\n              欢迎回来，{{ username }}\n            </v-card-text>\n          </v-card>\n        </v-col>\n\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              修改密码\n            </v-card-title>\n            <v-card-subtitle>\n              Change Password\n            </v-card-subtitle>\n            <v-card-text>\n              <v-form ref=\"changeForm\">\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                        v-model=\"oldPw\"\n                        :rules=\"formRequired\"\n                        label=\"原密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"6\">\n                    <v-text-field\n                        v-model=\"newPw\"\n                        :rules=\"formRequired\"\n                        label=\"新密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"6\">\n                    <v-text-field\n                        v-model=\"confirmNewPw\"\n                        :rules=\"confirmPwRules\"\n                        label=\"确认新密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"3\">\n                    <v-btn block color=\"info\" v-bind:loading=\"changeLoading\" @click=\"changePassword\">修改</v-btn>\n                  </v-col>\n                </v-row>\n              </v-form>\n            </v-card-text>\n          </v-card>\n        </v-col>\n\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              密钥管理\n            </v-card-title>\n            <v-card-subtitle>\n              Secret Manger\n            </v-card-subtitle>\n            <v-card-text>\n              <v-row>\n                <v-col cols=\"12\">\n                  <v-row>\n                    <v-col cols=\"auto\">\n                      <v-btn\n                          color=\"info\"\n                          @click=\"addSecretDialog=true\"\n                      >\n                        添加\n                      </v-btn>\n                      <v-dialog\n                          v-model=\"addSecretDialog\"\n                          max-width=\"600px\"\n                      >\n                        <v-card>\n                          <v-card-title>\n                            <span class=\"text-h5\">添加密钥</span>\n                          </v-card-title>\n                          <v-card-text>\n                            <v-container>\n                              <v-form ref=\"addForm\">\n                                <v-row>\n                                  <v-col\n                                      cols=\"12\"\n                                  >\n                                    <v-text-field\n                                        v-model=\"secretName\"\n                                        :rules=\"formRequired\"\n                                        label=\"名称\"\n                                        required\n                                    ></v-text-field>\n                                  </v-col>\n                                  <v-col cols=\"12\">\n                                    <v-text-field\n                                        v-model=\"secretId\"\n                                        :rules=\"formRequired\"\n                                        label=\"密钥ID\"\n                                        required\n                                    ></v-text-field>\n                                  </v-col>\n                                  <v-col cols=\"12\">\n                                    <v-text-field\n                                        v-model=\"secret\"\n                                        :rules=\"formRequired\"\n                                        label=\"密钥\"\n                                        required></v-text-field>\n                                  </v-col>\n                                </v-row>\n                              </v-form>\n                            </v-container>\n                          </v-card-text>\n                          <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"addSecretDialog = false\"\n                            >\n                              取消\n                            </v-btn>\n                            <v-btn\n                                :loading=\"addLoading\"\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"addSecret\"\n                            >\n                              添加\n                            </v-btn>\n                          </v-card-actions>\n                        </v-card>\n                      </v-dialog>\n                    </v-col>\n                    <v-col cols=\"auto\">\n                      <v-btn\n                          color=\"info\"\n                          @click=\"refresh()\"\n                      >\n                        刷新\n                      </v-btn>\n                    </v-col>\n                    <v-spacer></v-spacer>\n                  </v-row>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-data-table\n                      disable-sort\n                      :footer-props=\"{\n                      itemsPerPageText: '每页密钥数',\n                      }\"\n                      :headers=\"headers\"\n                      :items=\"secrets\"\n                      :items-per-page=5\n                      :loading=\"secretsLoading\"\n                      loading-text=\"正在加载...\"\n                      class=\"elevation-1\">\n                    <template slot=\"no-data\">\n                      <div>无任何密钥</div>\n                    </template>\n                    <template v-slot:item.action=\"{ item }\">\n                      <v-tooltip bottom>\n                        <template v-slot:activator=\"{ on, attrs }\">\n                          <v-btn\n                              color=\"info\"\n                              icon\n                              v-bind=\"attrs\"\n                              @click=\"deleteSecrets(item)\"\n                              v-on=\"on\"\n                          >\n                            <v-icon>mdi-delete</v-icon>\n                          </v-btn>\n                        </template>\n                        <span>删除</span>\n                      </v-tooltip>\n                    </template>\n                  </v-data-table>\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-overlay v-model=\"loading\">\n        <v-progress-circular\n            indeterminate\n            size=\"64\"\n        ></v-progress-circular>\n      </v-overlay>\n      <v-snackbar\n          v-model=\"message\"\n      >\n        {{ messageText }}\n        <template v-slot:action=\"{ attrs }\">\n          <v-btn\n              color=\"info\"\n              text\n              v-bind=\"attrs\"\n              @click=\"message = false\"\n          >\n            Close\n          </v-btn>\n        </template>\n      </v-snackbar>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport axios from '../api'\n\nexport default {\n  name: 'user',\n  metaInfo: {\n    title: '用户中心 - AWS Panel',\n  },\n  data() {\n    return {\n      username: '未知用户',\n      oldPw: '',\n      newPw: '',\n      confirmNewPw: '',\n      formRequired: [\n        v => !!v || \"必填项！\"\n      ],\n      confirmPwRules: [\n        v => !!v || \"必填项!\",\n        v => v === this.newPw || \"密码不匹配\"\n      ],\n      changeLoading: false,\n      addSecretDialog: false,\n      secretName: null,\n      secretId: null,\n      secret: null,\n      addLoading: false,\n      headers: [\n        {text: \"操作\", value: \"action\"},\n        {text: \"密钥名称\", value: \"name\"},\n      ],\n      secrets: [],\n      secretsLoading: false,\n      messageText: '',\n      message: false,\n      loading: false\n    }\n  },\n  mounted() {\n    axios.get('/api/v1/User/Info', {withCredentials: true}).then(response => {\n      this.username = response.data.name\n    })\n    axios.get('/api/v1/Secret/List', {withCredentials: true}).then(response => {\n      let tmp = []\n      for (const v of response.data.data) {\n        tmp.push({\n          name: v.name,\n          id: v.id,\n          secret: v.secret\n        })\n        this.secrets = tmp\n      }\n    })\n  },\n  methods: {\n    refresh() {\n      this.secretsLoading = true\n      axios.get('/api/v1/Secret/List', {withCredentials: true}).then(response => {\n        let tmp = []\n        if (response.data.data!=null){\n          response.data.data.forEach(v=>{\n            tmp.push({\n              name: v.name,\n              id: v.id,\n              secret: v.secret\n            })\n          })\n        }\n        this.secrets = tmp\n      }).finally(() => {\n        this.secretsLoading = false\n      })\n    },\n    changePassword() {\n      if (this.$refs.changeForm.validate()) {\n        this.changeLoading = true\n        let data = new FormData()\n        data.append('oldPassword', this.oldPw)\n        data.append('newPassword', this.newPw)\n        axios.post('/api/v1/User/ChangePassword', data, {withCredentials: true}).then(response => {\n          if (response.data.code === 200) {\n            this.$cookie.delete('usersession')\n            this.messageText = '修改成功！'\n            this.message = true\n            setTimeout(() => {\n              this.$router.push(\"/Login\")\n            }, 2000);\n          } else {\n            this.messageText = response.data.msg\n          }\n        }).finally(()=>{\n          this.$refs.changeForm.reset()\n          this.changeLoading = false\n          this.message = true\n        })\n      }\n    },\n    deleteSecrets(item) {\n      this.loading = true\n      let data = new FormData()\n      data.append('name', item.name)\n      axios.post('api/v1/Secret/Delete', data, {withCredentials: true}).then(response => {\n        if (response.data.code === 200) {\n          this.messageText = '删除成功！'\n        } else {\n          this.messageText = response.data.msg\n        }\n      }).finally(() => {\n        this.loading = false\n        this.message = true\n        this.refresh()\n      })\n    },\n    addSecret() {\n      this.addLoading = true\n      let data = new FormData()\n      data.append('name', this.secretName)\n      data.append('id', this.secretId)\n      data.append('secret', this.secret)\n      axios.post('api/v1/Secret/Add', data, {withCredentials: true}).then(response => {\n        if (response.data.code === 200) {\n          this.messageText = '添加成功'\n        } else {\n          this.messageText = response.data.msg\n        }\n      }).finally(() => {\n        this.$refs.addForm.reset()\n        this.addLoading = false\n        this.addSecretDialog = false\n        this.message = true\n        this.refresh()\n      })\n    }\n  }\n}\n</script>"]}]}