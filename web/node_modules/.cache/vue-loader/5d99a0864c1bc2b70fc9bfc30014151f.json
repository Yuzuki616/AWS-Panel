{"remainingRequest":"/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chengege/AWS-Panel-master/web/src/views/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/chengege/AWS-Panel-master/web/src/views/User.vue","mtime":1652337639000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICcuLi9hcGknCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3VzZXInLAogIG1ldGFJbmZvOiB7CiAgICB0aXRsZTogJ+eUqOaIt+S4reW/gyAtIEFXUyBQYW5lbCcsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICfmnKrnn6XnlKjmiLcnLAogICAgICBvbGRQdzogJycsCiAgICAgIG5ld1B3OiAnJywKICAgICAgY29uZmlybU5ld1B3OiAnJywKICAgICAgZm9ybVJlcXVpcmVkOiBbCiAgICAgICAgdiA9PiAhIXYgfHwgIuW/heWhq+mhue+8gSIKICAgICAgXSwKICAgICAgY29uZmlybVB3UnVsZXM6IFsKICAgICAgICB2ID0+ICEhdiB8fCAi5b+F5aGr6aG5ISIsCiAgICAgICAgdiA9PiB2ID09PSB0aGlzLm5ld1B3IHx8ICLlr4bnoIHkuI3ljLnphY0iCiAgICAgIF0sCiAgICAgIGNoYW5nZUxvYWRpbmc6IGZhbHNlLAogICAgICBhZGRTZWNyZXREaWFsb2c6IGZhbHNlLAogICAgICBzZWNyZXROYW1lOiBudWxsLAogICAgICBzZWNyZXRJZDogbnVsbCwKICAgICAgc2VjcmV0OiBudWxsLAogICAgICBhZGRMb2FkaW5nOiBmYWxzZSwKICAgICAgaGVhZGVyczogWwogICAgICAgIHt0ZXh0OiAi5pON5L2cIiwgdmFsdWU6ICJhY3Rpb24ifSwKICAgICAgICB7dGV4dDogIuWvhumSpeWQjeensCIsIHZhbHVlOiAibmFtZSJ9LAogICAgICBdLAogICAgICBzZWNyZXRzOiBbXSwKICAgICAgc2VjcmV0c0xvYWRpbmc6IGZhbHNlLAogICAgICBtZXNzYWdlVGV4dDogJycsCiAgICAgIG1lc3NhZ2U6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGF4aW9zLmdldCgnL2FwaS92MS9Vc2VyL0luZm8nLCB7d2l0aENyZWRlbnRpYWxzOiB0cnVlfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMudXNlcm5hbWUgPSByZXNwb25zZS5kYXRhLm5hbWUKICAgIH0pCiAgICBheGlvcy5nZXQoJy9hcGkvdjEvU2VjcmV0L0xpc3QnLCB7d2l0aENyZWRlbnRpYWxzOiB0cnVlfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIGxldCB0bXAgPSBbXQogICAgICBmb3IgKGNvbnN0IHYgb2YgcmVzcG9uc2UuZGF0YS5kYXRhKSB7CiAgICAgICAgdG1wLnB1c2goewogICAgICAgICAgbmFtZTogdi5uYW1lLAogICAgICAgICAgaWQ6IHYuaWQsCiAgICAgICAgICBzZWNyZXQ6IHYuc2VjcmV0CiAgICAgICAgfSkKICAgICAgICB0aGlzLnNlY3JldHMgPSB0bXAKICAgICAgfQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlZnJlc2goKSB7CiAgICAgIHRoaXMuc2VjcmV0c0xvYWRpbmcgPSB0cnVlCiAgICAgIGF4aW9zLmdldCgnL2FwaS92MS9TZWNyZXQvTGlzdCcsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBsZXQgdG1wID0gW10KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhIT1udWxsKXsKICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5mb3JFYWNoKHY9PnsKICAgICAgICAgICAgdG1wLnB1c2goewogICAgICAgICAgICAgIG5hbWU6IHYubmFtZSwKICAgICAgICAgICAgICBpZDogdi5pZCwKICAgICAgICAgICAgICBzZWNyZXQ6IHYuc2VjcmV0CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0aGlzLnNlY3JldHMgPSB0bXAKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5zZWNyZXRzTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgY2hhbmdlUGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmNoYW5nZUZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIHRoaXMuY2hhbmdlTG9hZGluZyA9IHRydWUKICAgICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgZGF0YS5hcHBlbmQoJ29sZFBhc3N3b3JkJywgdGhpcy5vbGRQdykKICAgICAgICBkYXRhLmFwcGVuZCgnbmV3UGFzc3dvcmQnLCB0aGlzLm5ld1B3KQogICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvdjEvVXNlci9DaGFuZ2VQYXNzd29yZCcsIGRhdGEsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRjb29raWUuZGVsZXRlKCd1c2Vyc2Vzc2lvbicpCiAgICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSAn5L+u5pS55oiQ5Yqf77yBJwogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0cnVlCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvTG9naW4iKQogICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSByZXNwb25zZS5kYXRhLm1zZwogICAgICAgICAgfQogICAgICAgIH0pLmZpbmFsbHkoKCk9PnsKICAgICAgICAgIHRoaXMuJHJlZnMuY2hhbmdlRm9ybS5yZXNldCgpCiAgICAgICAgICB0aGlzLmNoYW5nZUxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5tZXNzYWdlID0gdHJ1ZQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVTZWNyZXRzKGl0ZW0pIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGRhdGEuYXBwZW5kKCduYW1lJywgaXRlbS5uYW1lKQogICAgICBheGlvcy5wb3N0KCdhcGkvdjEvU2VjcmV0L0RlbGV0ZScsIGRhdGEsIHt3aXRoQ3JlZGVudGlhbHM6IHRydWV9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSAn5Yig6Zmk5oiQ5Yqf77yBJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VUZXh0ID0gcmVzcG9uc2UuZGF0YS5tc2cKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy5tZXNzYWdlID0gdHJ1ZQogICAgICAgIHRoaXMucmVmcmVzaCgpCiAgICAgIH0pCiAgICB9LAogICAgYWRkU2VjcmV0KCkgewogICAgICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlCiAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZGF0YS5hcHBlbmQoJ25hbWUnLCB0aGlzLnNlY3JldE5hbWUpCiAgICAgIGRhdGEuYXBwZW5kKCdpZCcsIHRoaXMuc2VjcmV0SWQpCiAgICAgIGRhdGEuYXBwZW5kKCdzZWNyZXQnLCB0aGlzLnNlY3JldCkKICAgICAgYXhpb3MucG9zdCgnYXBpL3YxL1NlY3JldC9BZGQnLCBkYXRhLCB7d2l0aENyZWRlbnRpYWxzOiB0cnVlfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VUZXh0ID0gJ+a3u+WKoOaIkOWKnycKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tZXNzYWdlVGV4dCA9IHJlc3BvbnNlLmRhdGEubXNnCiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLmFkZEZvcm0ucmVzZXQoKQogICAgICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy5hZGRTZWNyZXREaWFsb2cgPSBmYWxzZQogICAgICAgIHRoaXMubWVzc2FnZSA9IHRydWUKICAgICAgICB0aGlzLnJlZnJlc2goKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-row class=\"mb-5\">\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              用户中心\n            </v-card-title>\n            <v-card-subtitle>\n              User Center\n            </v-card-subtitle>\n            <v-card-text>\n              欢迎回来，{{ username }}\n            </v-card-text>\n          </v-card>\n        </v-col>\n\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              修改密码\n            </v-card-title>\n            <v-card-subtitle>\n              Change Password\n            </v-card-subtitle>\n            <v-card-text>\n              <v-form ref=\"changeForm\">\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                        v-model=\"oldPw\"\n                        :rules=\"formRequired\"\n                        label=\"原密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"6\">\n                    <v-text-field\n                        v-model=\"newPw\"\n                        :rules=\"formRequired\"\n                        label=\"新密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"6\">\n                    <v-text-field\n                        v-model=\"confirmNewPw\"\n                        :rules=\"confirmPwRules\"\n                        label=\"确认新密码\"\n                        required\n                        type=\"password\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"3\">\n                    <v-btn block color=\"info\" v-bind:loading=\"changeLoading\" @click=\"changePassword\">修改</v-btn>\n                  </v-col>\n                </v-row>\n              </v-form>\n            </v-card-text>\n          </v-card>\n        </v-col>\n\n        <v-col\n            cols=\"12\">\n          <v-card>\n            <v-card-title>\n              密钥管理\n            </v-card-title>\n            <v-card-subtitle>\n              Secret Manger\n            </v-card-subtitle>\n            <v-card-text>\n              <v-row>\n                <v-col cols=\"12\">\n                  <v-row>\n                    <v-col cols=\"auto\">\n                      <v-btn\n                          color=\"info\"\n                          @click=\"addSecretDialog=true\"\n                      >\n                        添加\n                      </v-btn>\n                      <v-dialog\n                          v-model=\"addSecretDialog\"\n                          max-width=\"600px\"\n                      >\n                        <v-card>\n                          <v-card-title>\n                            <span class=\"text-h5\">添加密钥</span>\n                          </v-card-title>\n                          <v-card-text>\n                            <v-container>\n                              <v-form ref=\"addForm\">\n                                <v-row>\n                                  <v-col\n                                      cols=\"12\"\n                                  >\n                                    <v-text-field\n                                        v-model=\"secretName\"\n                                        :rules=\"formRequired\"\n                                        label=\"名称\"\n                                        required\n                                    ></v-text-field>\n                                  </v-col>\n                                  <v-col cols=\"12\">\n                                    <v-text-field\n                                        v-model=\"secretId\"\n                                        :rules=\"formRequired\"\n                                        label=\"密钥ID\"\n                                        required\n                                    ></v-text-field>\n                                  </v-col>\n                                  <v-col cols=\"12\">\n                                    <v-text-field\n                                        v-model=\"secret\"\n                                        :rules=\"formRequired\"\n                                        label=\"密钥\"\n                                        required></v-text-field>\n                                  </v-col>\n                                </v-row>\n                              </v-form>\n                            </v-container>\n                          </v-card-text>\n                          <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"addSecretDialog = false\"\n                            >\n                              取消\n                            </v-btn>\n                            <v-btn\n                                :loading=\"addLoading\"\n                                color=\"blue darken-1\"\n                                text\n                                @click=\"addSecret\"\n                            >\n                              添加\n                            </v-btn>\n                          </v-card-actions>\n                        </v-card>\n                      </v-dialog>\n                    </v-col>\n                    <v-col cols=\"auto\">\n                      <v-btn\n                          color=\"info\"\n                          @click=\"refresh()\"\n                      >\n                        刷新\n                      </v-btn>\n                    </v-col>\n                    <v-spacer></v-spacer>\n                  </v-row>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-data-table\n                      disable-sort\n                      :footer-props=\"{\n                      itemsPerPageText: '每页密钥数',\n                      }\"\n                      :headers=\"headers\"\n                      :items=\"secrets\"\n                      :items-per-page=5\n                      :loading=\"secretsLoading\"\n                      loading-text=\"正在加载...\"\n                      class=\"elevation-1\">\n                    <template slot=\"no-data\">\n                      <div>无任何密钥</div>\n                    </template>\n                    <template v-slot:item.action=\"{ item }\">\n                      <v-tooltip bottom>\n                        <template v-slot:activator=\"{ on, attrs }\">\n                          <v-btn\n                              color=\"info\"\n                              icon\n                              v-bind=\"attrs\"\n                              @click=\"deleteSecrets(item)\"\n                              v-on=\"on\"\n                          >\n                            <v-icon>mdi-delete</v-icon>\n                          </v-btn>\n                        </template>\n                        <span>删除</span>\n                      </v-tooltip>\n                    </template>\n                  </v-data-table>\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-overlay v-model=\"loading\">\n        <v-progress-circular\n            indeterminate\n            size=\"64\"\n        ></v-progress-circular>\n      </v-overlay>\n      <v-snackbar\n          v-model=\"message\"\n      >\n        {{ messageText }}\n        <template v-slot:action=\"{ attrs }\">\n          <v-btn\n              color=\"info\"\n              text\n              v-bind=\"attrs\"\n              @click=\"message = false\"\n          >\n            Close\n          </v-btn>\n        </template>\n      </v-snackbar>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport axios from '../api'\n\nexport default {\n  name: 'user',\n  metaInfo: {\n    title: '用户中心 - AWS Panel',\n  },\n  data() {\n    return {\n      username: '未知用户',\n      oldPw: '',\n      newPw: '',\n      confirmNewPw: '',\n      formRequired: [\n        v => !!v || \"必填项！\"\n      ],\n      confirmPwRules: [\n        v => !!v || \"必填项!\",\n        v => v === this.newPw || \"密码不匹配\"\n      ],\n      changeLoading: false,\n      addSecretDialog: false,\n      secretName: null,\n      secretId: null,\n      secret: null,\n      addLoading: false,\n      headers: [\n        {text: \"操作\", value: \"action\"},\n        {text: \"密钥名称\", value: \"name\"},\n      ],\n      secrets: [],\n      secretsLoading: false,\n      messageText: '',\n      message: false,\n      loading: false\n    }\n  },\n  mounted() {\n    axios.get('/api/v1/User/Info', {withCredentials: true}).then(response => {\n      this.username = response.data.name\n    })\n    axios.get('/api/v1/Secret/List', {withCredentials: true}).then(response => {\n      let tmp = []\n      for (const v of response.data.data) {\n        tmp.push({\n          name: v.name,\n          id: v.id,\n          secret: v.secret\n        })\n        this.secrets = tmp\n      }\n    })\n  },\n  methods: {\n    refresh() {\n      this.secretsLoading = true\n      axios.get('/api/v1/Secret/List', {withCredentials: true}).then(response => {\n        let tmp = []\n        if (response.data.data!=null){\n          response.data.data.forEach(v=>{\n            tmp.push({\n              name: v.name,\n              id: v.id,\n              secret: v.secret\n            })\n          })\n        }\n        this.secrets = tmp\n      }).finally(() => {\n        this.secretsLoading = false\n      })\n    },\n    changePassword() {\n      if (this.$refs.changeForm.validate()) {\n        this.changeLoading = true\n        let data = new FormData()\n        data.append('oldPassword', this.oldPw)\n        data.append('newPassword', this.newPw)\n        axios.post('/api/v1/User/ChangePassword', data, {withCredentials: true}).then(response => {\n          if (response.data.code === 200) {\n            this.$cookie.delete('usersession')\n            this.messageText = '修改成功！'\n            this.message = true\n            setTimeout(() => {\n              this.$router.push(\"/Login\")\n            }, 2000);\n          } else {\n            this.messageText = response.data.msg\n          }\n        }).finally(()=>{\n          this.$refs.changeForm.reset()\n          this.changeLoading = false\n          this.message = true\n        })\n      }\n    },\n    deleteSecrets(item) {\n      this.loading = true\n      let data = new FormData()\n      data.append('name', item.name)\n      axios.post('api/v1/Secret/Delete', data, {withCredentials: true}).then(response => {\n        if (response.data.code === 200) {\n          this.messageText = '删除成功！'\n        } else {\n          this.messageText = response.data.msg\n        }\n      }).finally(() => {\n        this.loading = false\n        this.message = true\n        this.refresh()\n      })\n    },\n    addSecret() {\n      this.addLoading = true\n      let data = new FormData()\n      data.append('name', this.secretName)\n      data.append('id', this.secretId)\n      data.append('secret', this.secret)\n      axios.post('api/v1/Secret/Add', data, {withCredentials: true}).then(response => {\n        if (response.data.code === 200) {\n          this.messageText = '添加成功'\n        } else {\n          this.messageText = response.data.msg\n        }\n      }).finally(() => {\n        this.$refs.addForm.reset()\n        this.addLoading = false\n        this.addSecretDialog = false\n        this.message = true\n        this.refresh()\n      })\n    }\n  }\n}\n</script>"]}]}