{"remainingRequest":"/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chengege/AWS-Panel-master/web/src/views/Manger.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/chengege/AWS-Panel-master/web/src/views/Manger.vue","mtime":1652337639000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chengege/AWS-Panel-master/web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnLi4vYXBpJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1c2VyJywKICBtZXRhSW5mbzogewogICAgdGl0bGU6ICfnrqHnkIbkuK3lv4MgLSBBV1MgUGFuZWwnLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtZXNzYWdlOiBmYWxzZSwKICAgICAgbWVzc2FnZVRleHQ6ICcnLAogICAgICBmb3JtUmVxdWlyZWQ6IFsKICAgICAgICB2ID0+ICEhdiB8fCAi5b+F5aGr6aG577yBIgogICAgICBdLAogICAgICBhZGRVc2VyRGlhbG9nOiBmYWxzZSwKICAgICAgYWRkVXNlck5hbWU6ICcnLAogICAgICBhZGRQYXNzd29yZDogJycsCiAgICAgIGFkZENvbmZpcm1QYXNzd29yZDogJycsCiAgICAgIGFkZExvYWRpbmc6IGZhbHNlLAogICAgICB1c2VyTG9hZGluZzogZmFsc2UsCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7dGV4dDogJ+aTjeS9nCcsIHZhbHVlOiAnQWN0aW9uJ30sCiAgICAgICAge3RleHQ6ICfnlKjmiLflkI0nLCB2YWx1ZTogJ1VzZXJOYW1lJ30sCiAgICAgICAge3RleHQ6ICfnirbmgIEnLCB2YWx1ZTogJ1N0YXR1cyd9LAogICAgICAgIHt0ZXh0OiAn566h55CG5p2D6ZmQJywgdmFsdWU6ICdJc0FkbWluJ30sCiAgICAgIF0sCiAgICAgIHVzZXJzOiBbXSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8qYWRkVXNlcigpewogICAgfSwqLwogICAgcmVmcmVzaCgpIHsKICAgICAgdGhpcy51c2VyTG9hZGluZyA9IHRydWU7CiAgICAgIGFwaS5nZXQoIi9hcGkvdjEvVXNlci9MaXN0IikudGhlbihyc3AgPT4gewogICAgICAgIGlmIChyc3AuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIGxldCB0bXAgPSBbXQogICAgICAgICAgZm9yIChjb25zdCB2IG9mIHJzcC5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgdG1wLnB1c2goewogICAgICAgICAgICAgIFVzZXJOYW1lOiB2LlVzZXJOYW1lLAogICAgICAgICAgICAgIFN0YXR1czogdi5TdGF0dXMgPyAn5bCB56aBJyA6ICfmraPluLgnLAogICAgICAgICAgICAgIElzQWRtaW46IHYuSXNBZG1pbiA/ICfmmK8nIDogJ+WQpicsCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVzZXJzID0gdG1wCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJsaXN0IHVzZXIgbGlzdCBlcnJvcjogIiwgcnNwLmRhdGEubXNnKQogICAgICAgIH0KICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy51c2VyTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZGVsZXRlVXNlcihpdGVtKSB7CiAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZGF0YS5hcHBlbmQoInVzZXJuYW1lIiwgaXRlbS5Vc2VyTmFtZSkKICAgICAgYXBpLnBvc3QoIi9hcGkvdjEvVXNlci9EZWxldGUiLGRhdGEpLnRoZW4ocnNwID0+IHsKICAgICAgICB0aGlzLm1lc3NhZ2VUZXh0ID0gcnNwLmRhdGEubXNnCiAgICAgICAgdGhpcy5tZXNzYWdlID0gdHJ1ZQogICAgICB9KS5maW5hbGx5KCgpPT57CiAgICAgICAgdGhpcy5yZWZyZXNoKCkKICAgICAgfSkKICAgIH0sCiAgICBiYW5Vc2VyKGl0ZW0pIHsKICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBkYXRhLmFwcGVuZCgidXNlcm5hbWUiLCBpdGVtLlVzZXJOYW1lKQogICAgICBhcGkucG9zdCgiL2FwaS92MS9Vc2VyL0JhbiIsZGF0YSkudGhlbihyc3AgPT4gewogICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSByc3AuZGF0YS5tc2cKICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0cnVlCiAgICAgIH0pLmZpbmFsbHkoKCk9PnsKICAgICAgICB0aGlzLnJlZnJlc2goKQogICAgICB9KQogICAgfSwKICAgIHVuQmFuVXNlcihpdGVtKXsKICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBkYXRhLmFwcGVuZCgidXNlcm5hbWUiLCBpdGVtLlVzZXJOYW1lKQogICAgICBhcGkucG9zdCgiL2FwaS92MS9Vc2VyL1VuQmFuIixkYXRhKS50aGVuKHJzcCA9PiB7CiAgICAgICAgdGhpcy5tZXNzYWdlVGV4dCA9IHJzcC5kYXRhLm1zZwogICAgICAgIHRoaXMubWVzc2FnZSA9IHRydWUKICAgICAgfSkuZmluYWxseSgoKT0+ewogICAgICAgIHRoaXMucmVmcmVzaCgpCiAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5yZWZyZXNoKCkKICB9Cn0KCg=="},{"version":3,"sources":["Manger.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkLA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Manger.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <v-container>\n      <v-card>\n        <v-card-title>\n          用户列表\n        </v-card-title>\n        <v-card-subtitle>\n          User List\n        </v-card-subtitle>\n        <v-card-text>\n          <v-col cols=\"12\">\n            <v-row>\n              <!--<v-col cols=\"auto\">\n                <v-btn\n                    color=\"info\"\n                    @click=\"addUserDialog=true\"\n                >\n                  添加\n                </v-btn>\n                <v-dialog\n                    v-model=\"addUserDialog\"\n                    max-width=\"600px\"\n                >\n                  <v-card>\n                    <v-card-title>\n                      <span class=\"text-h5\">添加用户</span>\n                    </v-card-title>\n                    <v-card-text>\n                      <v-container>\n                        <v-form ref=\"addForm\">\n                          <v-row>\n                            <v-col\n                                cols=\"12\"\n                            >\n                              <v-text-field\n                                  v-model=\"addUserName\"\n                                  :rules=\"formRequired\"\n                                  label=\"用户名\"\n                                  required\n                              ></v-text-field>\n                            </v-col>\n                            <v-col cols=\"12\">\n                              <v-text-field\n                                  v-model=\"addPassword\"\n                                  :rules=\"formRequired\"\n                                  label=\"密码\"\n                                  required\n                              ></v-text-field>\n                            </v-col>\n                            <v-col cols=\"12\">\n                              <v-text-field\n                                  v-model=\"addConfirmPassword\"\n                                  :rules=\"formRequired\"\n                                  label=\"确认密码\"\n                                  required></v-text-field>\n                            </v-col>\n                          </v-row>\n                        </v-form>\n                      </v-container>\n                    </v-card-text>\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn\n                          color=\"blue darken-1\"\n                          text\n                          @click=\"addUserDialog = false\"\n                      >\n                        取消\n                      </v-btn>\n                      <v-btn\n                          :loading=\"addLoading\"\n                          color=\"blue darken-1\"\n                          text\n                          @click=\"addUser()\"\n                      >\n                        添加\n                      </v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-dialog>\n              </v-col>-->\n              <v-col cols=\"auto\">\n                <v-btn color=\"info\" @click=\"refresh\">刷新</v-btn>\n              </v-col>\n              <v-spacer></v-spacer>\n              <v-col cols=\"12\">\n                <v-data-table\n                    disable-sort\n                    :footer-props=\"{\n                      itemsPerPageText: '每页用户数',\n                      }\"\n                    :headers=\"headers\"\n                    :items=\"users\"\n                    :items-per-page=5\n                    :loading=\"userLoading\"\n                    loading-text=\"正在加载...\"\n                    class=\"elevation-1\">\n                  <template slot=\"no-data\">\n                    <div>无任何用户</div>\n                  </template>\n                  <template v-slot:item.Action=\"{ item }\">\n                    <v-tooltip bottom>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn\n                            color=\"info\"\n                            icon\n                            v-bind=\"attrs\"\n                            @click=\"deleteUser(item)\"\n                            v-on=\"on\"\n                        >\n                          <v-icon>mdi-delete</v-icon>\n                        </v-btn>\n                      </template>\n                      <span>删除</span>\n                    </v-tooltip>\n                    <v-tooltip bottom>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn\n                            color=\"info\"\n                            icon\n                            v-bind=\"attrs\"\n                            @click=\"banUser(item)\"\n                            v-on=\"on\"\n                        >\n                          <v-icon>mdi-lock</v-icon>\n                        </v-btn>\n                      </template>\n                      <span>封禁</span>\n                    </v-tooltip>\n                    <v-tooltip bottom>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn\n                            color=\"info\"\n                            icon\n                            v-bind=\"attrs\"\n                            @click=\"unBanUser(item)\"\n                            v-on=\"on\"\n                        >\n                          <v-icon>mdi-lock-open</v-icon>\n                        </v-btn>\n                      </template>\n                      <span>解封</span>\n                    </v-tooltip>\n                  </template>\n                </v-data-table>\n              </v-col>\n            </v-row>\n          </v-col>\n        </v-card-text>\n      </v-card>\n      <v-overlay v-model=\"loading\">\n        <v-progress-circular\n            indeterminate\n            size=\"64\"\n        ></v-progress-circular>\n      </v-overlay>\n      <v-snackbar\n          v-model=\"message\"\n      >\n        {{ messageText }}\n        <template v-slot:action=\"{ attrs }\">\n          <v-btn\n              color=\"info\"\n              text\n              v-bind=\"attrs\"\n              @click=\"message = false\"\n          >\n            Close\n          </v-btn>\n        </template>\n      </v-snackbar>\n    </v-container>\n  </v-app>\n</template>\n\n\n<script>\nimport api from '../api'\n\nexport default {\n  name: 'user',\n  metaInfo: {\n    title: '管理中心 - AWS Panel',\n  },\n  data() {\n    return {\n      loading: false,\n      message: false,\n      messageText: '',\n      formRequired: [\n        v => !!v || \"必填项！\"\n      ],\n      addUserDialog: false,\n      addUserName: '',\n      addPassword: '',\n      addConfirmPassword: '',\n      addLoading: false,\n      userLoading: false,\n      headers: [\n        {text: '操作', value: 'Action'},\n        {text: '用户名', value: 'UserName'},\n        {text: '状态', value: 'Status'},\n        {text: '管理权限', value: 'IsAdmin'},\n      ],\n      users: [],\n    }\n  },\n  methods: {\n    /*addUser(){\n    },*/\n    refresh() {\n      this.userLoading = true;\n      api.get(\"/api/v1/User/List\").then(rsp => {\n        if (rsp.data.code === 200) {\n          let tmp = []\n          for (const v of rsp.data.data) {\n            tmp.push({\n              UserName: v.UserName,\n              Status: v.Status ? '封禁' : '正常',\n              IsAdmin: v.IsAdmin ? '是' : '否',\n            })\n          }\n          this.users = tmp\n        } else {\n          console.log(\"list user list error: \", rsp.data.msg)\n        }\n      }).finally(() => {\n        this.userLoading = false\n      })\n    },\n    deleteUser(item) {\n      let data = new FormData()\n      data.append(\"username\", item.UserName)\n      api.post(\"/api/v1/User/Delete\",data).then(rsp => {\n        this.messageText = rsp.data.msg\n        this.message = true\n      }).finally(()=>{\n        this.refresh()\n      })\n    },\n    banUser(item) {\n      let data = new FormData()\n      data.append(\"username\", item.UserName)\n      api.post(\"/api/v1/User/Ban\",data).then(rsp => {\n        this.messageText = rsp.data.msg\n        this.message = true\n      }).finally(()=>{\n        this.refresh()\n      })\n    },\n    unBanUser(item){\n      let data = new FormData()\n      data.append(\"username\", item.UserName)\n      api.post(\"/api/v1/User/UnBan\",data).then(rsp => {\n        this.messageText = rsp.data.msg\n        this.message = true\n      }).finally(()=>{\n        this.refresh()\n      })\n    }\n  },\n  mounted() {\n    this.refresh()\n  }\n}\n\n</script>"]}]}