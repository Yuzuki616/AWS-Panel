(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],u=0,v=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&v.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(v.length)v.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"2a23":function(e,t,a){e.exports=a.p+"img/jb_beam.c4eec953.svg"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"nattier-blue--text text--accent-4"}},[a("v-list-item",{attrs:{onclick:"window.location.href='/'"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-home")])],1),a("v-list-item-title",[e._v("主页｜Home")])],1),a("v-list-item",{attrs:{onclick:"window.location.href='/Instance'"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-server")])],1),a("v-list-item-title",[e._v("实例｜Instances")])],1),a("v-list-item",{attrs:{onclick:"window.location.href='/User'"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-details")])],1),a("v-list-item-title",[e._v("用户｜User")])],1),"true"===this.$cookie.get("isAdmin")?a("v-list-item",{attrs:{onclick:"window.location.href='/Manger'"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-information-outline")])],1),a("v-list-item-title",[e._v("管理 | Manger")])],1):e._e()],1)],1)],1),a("v-app-bar",{attrs:{app:"","clipped-left":"",color:"white"}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),a("v-app-bar-title",[a("v-icon",{attrs:{large:""}},[e._v("mdi-aws")]),e._v(" AWS Panel ")],1),a("v-spacer"),null==this.$cookie.get("loginSession")?a("v-btn",{attrs:{href:"/Register",text:""}},[a("span",{staticClass:"mr-2"},[e._v("注册")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-account-plus")])],1):a("v-btn",{attrs:{href:"/User",text:""}},[a("span",{staticClass:"mr-2"},[e._v("用户")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-account-details")])],1),null==this.$cookie.get("loginSession")?a("v-btn",{attrs:{href:"/Login",text:""}},[a("span",{staticClass:"mr-2"},[e._v("登陆")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-account-key")])],1):a("v-btn",{attrs:{text:""},on:{click:function(t){return e.logout()}}},[a("span",{staticClass:"mr-2"},[e._v("注销")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-logout")])],1)],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1)],1)},r=[],o=a("bc3a"),i=a.n(o),l=i.a.create({baseURL:"",withCredentials:!0,validateStatus:function(e){return e<500}}),c={name:"App",data:function(){return{drawer:null}},methods:{logout:function(){this.$cookie.delete("loginSession"),this.$cookie.delete("isAdmin"),l.get("/api/v1/User/Logout"),this.$router.push("/Login")}},mounted:function(){var e=this;null!=this.$cookie.get("loginSession")&&l.get("/api/v1/User/IsAdmin").then((function(t){null!=e.$cookie.get("loginSession")&&401===t.status&&(e.$cookie.delete("loginSession"),location.reload()),!0===t.data.msg?null==e.$cookie.get("isAdmin")&&(e.$cookie.set("isAdmin","true"),location.reload()):null!=e.$cookie.get("isAdmin")&&(e.$cookie.delete("isAdmin"),location.reload())}))}},d=c,u=a("2877"),v=a("6544"),m=a.n(v),p=a("7496"),f=a("40dc"),g=a("5bc1"),h=a("bb78"),b=a("8336"),x=a("a523"),_=a("132d"),w=a("8860"),S=a("da13"),k=a("1baa"),y=a("34c3"),V=a("5d23"),C=a("f6c4"),T=a("f774"),I=a("2fa4"),L=Object(u["a"])(d,s,r,!1,null,null,null),D=L.exports;m()(L,{VApp:p["a"],VAppBar:f["a"],VAppBarNavIcon:g["a"],VAppBarTitle:h["a"],VBtn:b["a"],VContainer:x["a"],VIcon:_["a"],VList:w["a"],VListItem:S["a"],VListItemGroup:k["a"],VListItemIcon:y["a"],VListItemTitle:V["b"],VMain:C["a"],VNavigationDrawer:T["a"],VSpacer:I["a"]});a("ac1f"),a("466d"),a("4d63"),a("c607"),a("2c3e"),a("25f0");var P=a("8c4f"),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"text-center"},[n("v-col",{attrs:{cols:"12"}},[n("v-img",{staticClass:"my-3",attrs:{src:a("942d"),contain:"",height:"200"}})],1),n("v-col",{staticClass:"mb-4"},[n("h1",{staticClass:"display-2 font-weight-bold mb-3"},[e._v(" 欢迎使用AWS Panel ")]),n("p",{staticClass:"subheading font-weight-regular"},[e._v(" 使用AWS Panel可以方便的管理AWS资源，比如EC2、Lightsail等。 ")])]),n("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[n("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v(" Thanks ")]),n("v-row",{attrs:{justify:"center"}},e._l(e.thanks,(function(t,a){return n("a",{key:a,staticClass:"subheading mx-3",attrs:{href:t.href,target:"_blank"}},[e._v(" "+e._s(t.text)+" ")])})),0),n("v-row",{attrs:{justify:"center"}},[n("p",[e._v("感谢 "),n("a",{attrs:{href:"https://www.jetbrains.com/"}},[e._v("JetBrains")]),e._v(" 为本项目提供的 "),n("a",{attrs:{href:"https://www.jetbrains.com/webstorm/"}},[e._v("WebStorm")]),e._v(" 和 "),n("a",{attrs:{href:"https://www.jetbrains.com/go/"}},[e._v("Goland")]),e._v(" IDE的免费使用授权")])]),n("v-row",[n("v-img",{attrs:{src:a("2a23"),contain:"",height:"300"}})],1)],1)],1)],1)},A=[],R={name:"Home",metaInfo:{title:"主页 - AWS Panel"},data:function(){return{thanks:[{text:"Vue.js",href:"https://vuejs.org/"},{text:"Vuetify",href:"https://vuetifyjs.com/"},{text:"Axios",href:"https://github.com/axios/axios"},{text:"Gin",href:"https://github.com/gin-gonic/gin"},{text:"aws-sdk-go",href:"https://github.com/aws/aws-sdk-go"}]}}},F=R,q=a("62ad"),$=a("adda"),U=a("0fd9"),j=Object(u["a"])(F,N,A,!1,null,null,null),K=j.exports;m()(j,{VCol:q["a"],VContainer:x["a"],VImg:$["a"],VRow:U["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-card",[a("v-card-title",[e._v("登陆")]),a("v-card-subtitle",[e._v("Login")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-form",{ref:"loginForm"},[a("v-text-field",{attrs:{rules:e.usernameRules,label:"用户名",name:"username","prepend-inner-icon":"mdi-account-outline",required:"",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{id:"password",rules:e.passwordRules,label:"密码",name:"password","prepend-inner-icon":"mdi-lock",required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1)],1),a("v-card-actions",[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{block:"",color:"info",loading:e.loading},on:{click:e.submit}},[e._v("登陆")])],1)],1)],1)],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.text)+" ")])],1)],1)},B=[],E=(a("00b4"),a("d3b7"),{name:"login",metaInfo:{title:"登陆 - AWS Panel"},data:function(){return{text:"登陆失败！",snackbar:!1,username:"",usernameRules:[function(e){return!!e||"用户名为必填项"},function(e){return/^[a-zA-Z0-9_-]{4,8}$/.test(e)||"用户名无效"}],password:"",passwordRules:[function(e){return!!e||"密码为必填项"}],loading:!1}},methods:{submit:function(){var e=this;if(this.$refs.loginForm.validate()){this.loading=!0;var t=new FormData;t.append("username",this.username),t.append("password",this.password),l.post("/api/v1/User/Login",t,{withCredentials:!0}).then((function(t){200===t.data.code?(t.data.isAdmin&&e.$cookie.set("isAdmin","true"),e.text="登陆成功，即将跳转到主页...",setTimeout((function(){e.$router.push("/")}),2e3)):e.text=t.data.msg})).catch((function(e){console.error(e)})).finally((function(){e.snackbar=!0,e.loading=!1}))}}}}),z=E,G=a("b0af"),M=a("99d9"),H=a("4bd4"),W=a("2db4"),J=a("8654"),Q=Object(u["a"])(z,O,B,!1,null,null,null),Z=Q.exports;m()(Q,{VApp:p["a"],VBtn:b["a"],VCard:G["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VForm:H["a"],VRow:U["a"],VSnackbar:W["a"],VTextField:J["a"]});var X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-card",[a("v-card-title",[e._v("注册")]),a("v-card-subtitle",[e._v("Register")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-form",{ref:"registerForm"},[a("v-text-field",{attrs:{rules:e.usernameRules,label:"用户名",name:"username","prepend-inner-icon":"mdi-account-outline",required:"",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{id:"password",rules:e.passwordRules,label:"密码",name:"Password","prepend-inner-icon":"mdi-lock",required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{id:"confirmPassword",rules:e.confirmPasswordRules,label:"确认密码",name:"Confirm Password","prepend-inner-icon":"mdi-lock",required:"",type:"password"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1)],1)],1),a("v-card-actions",[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{block:"",color:"info",loading:e.loading},on:{click:e.submit}},[e._v("注册")])],1),a("v-spacer")],1)],1)],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.text)+" ")])],1)],1)},Y=[],ee={name:"register",metaInfo:{title:"注册 - AWS Panel"},data:function(){var e=this;return{text:"注册失败！",snackbar:!1,username:"",usernameRules:[function(e){return!!e||"用户名为必填项"},function(e){return/^[a-zA-Z0-9_-]{4,8}$/.test(e)||"用户名无效，请输入4-8位字母、数字、下划线或减号"}],password:"",passwordRules:[function(e){return!!e||"密码为必填项"}],confirmPassword:"",confirmPasswordRules:[function(e){return!!e||"确认密码为必填项"},function(t){return t===e.password||"密码不匹配"}],loading:!1}},methods:{submit:function(){var e=this;if(this.$refs.registerForm.validate()){this.loading=!0;var t=new FormData;t.append("username",this.username),t.append("password",this.password),l.post("/api/v1/User/Register",t).then((function(t){200===t.data.code?(e.text="注册成功！即将跳转至登陆页面...",setTimeout((function(){e.$router.push("/Login")}),2e3)):e.text=t.data.msg})).catch((function(t){console.log(t),e.loading=!1})).finally((function(){e.snackbar=!0,e.loading=!1}))}}}},te=ee,ae=Object(u["a"])(te,X,Y,!1,null,null,null),ne=ae.exports;m()(ae,{VApp:p["a"],VBtn:b["a"],VCard:G["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VForm:H["a"],VRow:U["a"],VSnackbar:W["a"],VSpacer:I["a"],VTextField:J["a"]});var se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-row",{staticClass:"mb-5"},[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.secrets,label:"密钥",solo:"",dense:"","hide-details":""},on:{change:e.secretSelect},model:{value:e.secretSelected,callback:function(t){e.secretSelected=t},expression:"secretSelected"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[e._v(" Ec2实例 ")]),a("v-card-subtitle",[e._v(" Ec2 Instances ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-select",{attrs:{items:e.regions,label:"区域",solo:"",dense:"","hide-details":""},on:{change:e.refresh},model:{value:e.regionSelected,callback:function(t){e.regionSelected=t},expression:"regionSelected"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:e.createCheck}},[e._v(" 创建 ")]),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("创建Ec2")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"createForm"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"名称",required:""},model:{value:e.ec2Name,callback:function(t){e.ec2Name=t},expression:"ec2Name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.type,rules:e.formRequired,label:"类型",required:""},model:{value:e.typeSelected,callback:function(t){e.typeSelected=t},expression:"typeSelected"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.ami,rules:e.formRequired,label:"操作系统",required:""},model:{value:e.amiSelected,callback:function(t){e.amiSelected=t},expression:"amiSelected"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.disk,rules:e.formRequired,label:"硬盘大小",required:""},model:{value:e.diskSelected,callback:function(t){e.diskSelected=t},expression:"diskSelected"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.createDialog=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.create}},[e._v(" 创建 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.sshKeyDialog,callback:function(t){e.sshKeyDialog=t},expression:"sshKeyDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("SSH密钥")])]),a("v-card-text",[a("v-textarea",{attrs:{readonly:""},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.copySshKey}},[e._v(" 复制 ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:e.refresh}},[e._v("刷新")])],1),a("v-spacer"),a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{"footer-props":{itemsPerPageText:"每页实例数"},headers:e.headers,items:e.Instances,"items-per-page":5,loading:e.tableLoading,"loading-text":"正在加载...","disable-sort":""},scopedSlots:e._u([{key:"item.Action",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.startInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-play")])],1)]}}],null,!0)},[a("span",[e._v("启动")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.stopInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-stop")])],1)]}}],null,!0)},[a("span",[e._v("停止")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.restartInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-restart")])],1)]}}],null,!0)},[a("span",[e._v("重启")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.deleteInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[e._v("删除")])])]}}])},[a("template",{slot:"no-data"},[a("div",[e._v("无任何实例")])])],2)],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("lightsail",{ref:"lightsail",attrs:{loading:e.loading,message:e.message,messageText:e.messageText}})],1)],1),a("v-overlay",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.message=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[e._v(" "+e._s(e.messageText)+" ")])],1)],1)},re=[],oe=a("b85c"),ie=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Lightsail实例")]),a("v-card-subtitle",[e._v("Lightsail Instance")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-select",{attrs:{items:e.zone,label:"区域",solo:"",dense:"","hide-details":""},on:{change:e.refreshLs},model:{value:e.regionSelected,callback:function(t){e.regionSelected=t},expression:"regionSelected"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:e.createCheck}},[e._v(" 创建 ")]),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("创建Lightsail")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"createLsForm"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"名称",required:""},model:{value:e.lsName,callback:function(t){e.lsName=t},expression:"lsName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"数量",required:""},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.zone,rules:e.formRequired,label:"地区",required:""},model:{value:e.zoneSelected,callback:function(t){e.zoneSelected=t},expression:"zoneSelected"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.bundle,rules:e.formRequired,label:"类型",required:""},model:{value:e.bundleSelected,callback:function(t){e.bundleSelected=t},expression:"bundleSelected"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.blueprint,rules:e.formRequired,label:"操作系统",required:""},model:{value:e.blueprintSelected,callback:function(t){e.blueprintSelected=t},expression:"blueprintSelected"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.createDialog=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.createLs}},[e._v(" 创建 ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.sshKeyDialog,callback:function(t){e.sshKeyDialog=t},expression:"sshKeyDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("SSH密钥")])]),a("v-card-text",[a("v-textarea",{attrs:{readonly:""},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.copySshKey}},[e._v(" 复制 ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{attrs:{color:"info"},on:{click:e.refreshLs}},[e._v("刷新")])],1),a("v-spacer"),a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{"footer-props":{itemsPerPageText:"每页实例数"},headers:e.lsHeaders,items:e.lsInstances,"items-per-page":5,loading:e.lsTableLoading,"loading-text":"正在加载...","disable-sort":""},scopedSlots:e._u([{key:"item.Action",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.startInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-play")])],1)]}}],null,!0)},[a("span",[e._v("启动")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.stopInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-stop")])],1)]}}],null,!0)},[a("span",[e._v("停止")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.restartInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-restart")])],1)]}}],null,!0)},[a("span",[e._v("重启")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.offfirewall(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-wall")])],1)]}}],null,!0)},[a("span",[e._v("关闭防火墙")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.deleteInstance(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[e._v("删除")])])]}}])},[a("template",{slot:"no-data"},[a("div",[e._v("无任何实例")])])],2)],1)],1)],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.message=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[e._v(" "+e._s(e.messageText)+" ")]),a("v-overlay",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)}),le=[],ce={name:"lightsail",props:["loading","message","messageText"],data:function(){return{formRequired:[function(e){return!!e||"必填项！"}],regionSelected:"",secretName:"",createDialog:!1,sshKeyDialog:!1,sshKey:"",lsName:"",quantity:1,zone:[{text:"弗吉尼亚北部",value:"us-east-1"},{text:"俄亥俄",value:"us-east-2"},{text:"俄勒冈",value:"us-west-2"},{text:"日本",value:"ap-northeast-1"},{text:"韩国",value:"ap-northeast-2"},{text:"加拿大",value:"ca-central-1"},{text:"新加坡",value:"ap-southeast-1"},{text:"澳洲",value:"ap-southeast-2"},{text:"法国",value:"eu-central-1"},{text:"冰岛",value:"eu-west-1"},{text:"德国",value:"eu-west-2"},{text:"俄罗斯",value:"eu-west-3"},{text:"印度",value:"ap-south-1"},{text:"瑞典",value:"eu-north-1"}],zoneSelected:"",bundle:[{text:"Nano",value:"nano_2_0"},{text:"Micro",value:"micro_2_0"},{text:"Small",value:"small_2_0"}],bundleSelected:"",blueprint:[{text:"Debian10",value:"debian_10"},{text:"Ubuntu20.04",value:"ubuntu_20_04"}],blueprintSelected:"",lsHeaders:[{text:"操作",value:"Action"},{text:"名称",value:"Name"},{text:"状态",value:"Status"},{text:"类型",value:"Type"},{text:"IP",value:"Ip"}],lsInstances:[],lsTableLoading:!1}},methods:{createCheck:function(){""===this.secretName?(this.messageText="请先选择密钥",this.message=!0):this.createDialog=!0},createLs:function(){var e=this;if(this.$refs.createLsForm.validate()){this.createDialog=!1,this.loading=!0;var t=new FormData;t.append("secretName",this.secretName),t.append("name",this.lsName),t.append("zone",this.zoneSelected),t.append("bundleId",this.bundleSelected),t.append("blueprintId",this.blueprintSelected),t.append("quantity",this.quantity),i.a.post("/api/v1/LightSail/Create",t,{withCredentials:!0}).then((function(t){200===t.data.code?e.messageText="已添加至创建队列":console.error(t.data.msg)})).finally((function(){e.$refs.createLsForm.reset(),e.loading=!1,e.sshKeyDialog=!0,e.message=!0}))}},copySshKey:function(){var e=this;this.sshKeyDialog=!1,navigator.clipboard.writeText(this.sshKey).then((function(){e.messageText="已复制到剪贴板",e.message=!0,e.sshKey="",e.refreshLs()}))},refreshLs:function(){var e=this;if(""!==this.regionSelected&&""!==this.secretSelected){this.lsTableLoading=!0;var t=new FormData;t.append("zone",this.regionSelected),t.append("secretName",this.secretName),i.a.post("/api/v1/LightSail/List",t,{withCredentials:!0}).then((function(t){200===t.data.code?null==t.data.data?e.lsInstances=[]:e.lsInstances=t.data.data:(e.lsInstances=[],console.error(t.data.msg))})).finally((function(){e.lsTableLoading=!1}))}},startInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("secretName",this.secretName),a.append("name",e.Name),i.a.post("/api/v1/LightSail/Start",a,{withCredentials:!0}).then((function(e){200===e.data.code?t.messageText="已添加至启动队列":console.error(e.data.msg)})).finally((function(){t.loading=!1,t.message=!0}))}},stopInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("secretName",this.secretName),a.append("name",e.Name),i.a.post("/api/v1/LightSail/Stop",a,{withCredentials:!0}).then((function(e){200===e.data.code?t.messageText="已添加至停止队列":console.error(e.data.msg)})).finally((function(){t.message=!0,t.loading=!1}))}},restartInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("secretName",this.secretName),a.append("name",e.Name),i.a.post("/api/v1/LightSail/Reboot",a,{withCredentials:!0}).then((function(e){200===e.data.code?t.messageText="已添加至重启队列":console.error(e.data.msg)})).finally((function(){t.message=!0,t.loading=!1}))}},offfirewall:function(e){var t=this;if(""!==e.Status&&"pending"!==e.Status){this.loading=!0;var a=new FormData;a.append("secretName",this.secretName),a.append("name",e.Name),a.append("zone",this.regionSelected),i.a.post("/api/v1/LightSail/offFirewall",a,{withCredentials:!0}).then((function(e){200===e.data.code?t.messageText="已删除防火墙":console.error(e.data.msg)})).finally((function(){t.message=!0,t.loading=!1}))}},deleteInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("secretName",this.secretName),a.append("name",e.Name),i.a.post("/api/v1/LightSail/Delete",a,{withCredentials:!0}).then((function(e){200===e.data.code?(t.messageText="已添加至删除队列",t.refresh()):(t.messageText=e.data.msg,t.message=!0)})).finally((function(){t.loading=!1}))}}},mounted:function(){var e=this;this.$on("secretSelect",(function(t){e.secretName=t,e.refreshLs()}))}},de=ce,ue=a("8fea"),ve=a("169a"),me=a("a797"),pe=a("490a"),fe=a("b974"),ge=a("a844"),he=a("3a2f"),be=Object(u["a"])(de,ie,le,!1,null,null,null),xe=be.exports;m()(be,{VBtn:b["a"],VCard:G["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VDataTable:ue["a"],VDialog:ve["a"],VForm:H["a"],VIcon:_["a"],VOverlay:me["a"],VProgressCircular:pe["a"],VRow:U["a"],VSelect:fe["a"],VSnackbar:W["a"],VSpacer:I["a"],VTextField:J["a"],VTextarea:ge["a"],VTooltip:he["a"]});var _e,we,Se={name:"Instances",components:{Lightsail:xe},metaInfo:{title:"实例 - AWS Panel"},data:function(){return{formRequired:[function(e){return!!e||"必填项！"}],createDialog:!1,sshKeyDialog:!1,sshKey:"",tableLoading:!1,regions:[{text:"弗吉尼亚北部",value:"us-east-1"},{text:"俄亥俄",value:"us-east-2"},{text:"加利福尼亚北部",value:"us-west-1"},{text:"俄勒冈",value:"us-west-2"},{text:"香港",value:"ap-east-1"},{text:"日本",value:"ap-northeast-1"},{text:"大阪",value:"ap-northeast-3"},{text:"韩国",value:"ap-northeast-2"},{text:"加拿大",value:"ca-central-1"},{text:"墨西哥",value:"us-east-3"},{text:"澳大利亚",value:"ap-southeast-6"},{text:"新加坡",value:"ap-southeast-1"},{text:"澳洲",value:"ap-southeast-2"},{text:"法国",value:"eu-central-1"},{text:"冰岛",value:"eu-west-1"},{text:"德国",value:"eu-west-2"},{text:"俄罗斯",value:"eu-west-3"},{text:"印度",value:"ap-south-1"},{text:"新西兰",value:"ap-southeast-3"},{text:"马来西亚",value:"ap-southeast-5"},{text:"泰国",value:"ap-northeast-3"},{text:"菲律宾",value:"ap-southeast-4"},{text:"西班牙",value:"eu-west-4"},{text:"瑞士",value:"eu-west-6"}],regionSelected:"",secrets:[],secretSelected:"",headers:[{text:"操作",value:"Action"},{text:"名称",value:"Name"},{text:"实例ID",value:"InstanceId"},{text:"状态",value:"Status"},{text:"类型",value:"Type"},{text:"IP",value:"Ip"}],ec2Name:"",type:["t2.micro","t2.small","t2.medium","t2.large","t2.xlarge","t2.2xlarge"],typeSelected:"",ami:[{text:"Debian10",value:"debian-10-amd64-20210329-591"},{text:"Ubuntu20.04",value:"ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210430"},{text:"Redhat8",value:"RHEL_HA-8.4.0_HVM-20210504-x86_64-2-Hourly2-GP2"}],amiSelected:"",disk:[{text:"8GB",value:8},{text:"16GB",value:16},{text:"32GB",value:32},{text:"64GB",value:64},{text:"128GB",value:128},{text:"256GB",value:256},{text:"512GB",value:512},{text:"1024GB",value:1024}],diskSelected:"",Instances:[],message:!1,messageText:"",loading:!1}},mounted:function(){var e=this;l.get("/api/v1/Secret/List",{withCredentials:!0}).then((function(t){var a=[];if(200===t.data.code){var n,s=Object(oe["a"])(t.data.data);try{for(s.s();!(n=s.n()).done;){var r=n.value;a.push({text:r.name,id:r.id,secret:r.secret})}}catch(o){s.e(o)}finally{s.f()}e.secrets=a}else console.error("load secret error: ",t.data.msg)}))},methods:{secretSelect:function(){this.refresh(),this.$refs.lightsail.$emit("secretSelect",this.secretSelected)},createCheck:function(){""===this.regionSelected&&""===this.secretSelected?(console.log(this.regionSelected,this.secretSelected),this.messageText="请先选择密钥和区域",this.message=!0):this.createDialog=!0},refresh:function(){var e=this;if(""!==this.regionSelected&&""!==this.secretSelected){this.tableLoading=!0;var t=new FormData;t.append("region",this.regionSelected),t.append("secretName",this.secretSelected),l.post("/api/v1/Ec2/List",t,{withCredentials:!0}).then((function(t){200===t.data.code?null==t.data.data?e.Instances=[]:e.Instances=t.data.data:(e.Instances=[],console.error(t.data.msg))})).finally((function(){e.tableLoading=!1}))}},create:function(){var e=this;if(this.$refs.createForm.validate()){this.createDialog=!1,this.loading=!0;var t=new FormData;t.append("region",this.regionSelected),t.append("secretName",this.secretSelected),t.append("ec2Name",this.ec2Name),t.append("ec2Type",this.typeSelected),t.append("ami",this.amiSelected),t.append("disk",this.diskSelected),l.post("/api/v1/Ec2/Create",t,{withCredentials:!0}).then((function(t){200===t.data.code?(e.messageText="已添加至创建队列！",e.sshKey=t.data.data):e.messageText=t.data.msg})).finally((function(){e.$refs.createForm.reset(),e.loading=!1,e.sshKeyDialog=!0,e.message=!0}))}},copySshKey:function(){var e=this;this.sshKeyDialog=!1,navigator.clipboard.writeText(this.sshKey).then((function(){e.messageText="已复制到剪贴板",e.message=!0,e.sshKey="",e.refresh()}))},startInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("region",this.regionSelected),a.append("secretName",this.secretSelected),a.append("ec2Id",e.InstanceId),l.post("/api/v1/Ec2/Start",a,{withCredentials:!0}).then((function(e){200===e.data.code?(t.messageText="已添加至启动队列！",t.message=!0,t.refresh()):(t.messageText=e.data.msg,t.message=!0)})).finally((function(){t.loading=!1}))}},stopInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("region",this.regionSelected),a.append("secretName",this.secretSelected),a.append("ec2Id",e.InstanceId),l.post("/api/v1/Ec2/Stop",a,{withCredentials:!0}).then((function(e){200===e.data.code?(t.messageText="已添加至停止队列！",t.refresh()):(t.messageText=e.data.msg,t.message=!0)})).finally((function(){t.loading=!1}))}},restartInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("region",this.regionSelected),a.append("secretName",this.secretSelected),a.append("ec2Id",e.InstanceId),l.post("/api/v1/Ec2/Reboot",a,{withCredentials:!0}).then((function(e){200===e.data.code?(t.messageText="已添加至重启队列！",t.refresh()):(t.messageText=e.data.msg,t.message=!0)})).finally((function(){t.loading=!1}))}},deleteInstance:function(e){var t=this;if(""!==e.Status){this.loading=!0;var a=new FormData;a.append("region",this.regionSelected),a.append("secretName",this.secretSelected),a.append("ec2Id",e.InstanceId),l.post("/api/v1/Ec2/Delete",a,{withCredentials:!0}).then((function(e){200===e.data.code?(t.messageText="已添加至删除队列！",t.refresh()):(t.messageText=e.data.msg,t.message=!0)})).finally((function(){t.loading=!1}))}}}},ke=Se,ye=Object(u["a"])(ke,se,re,!1,null,null,null),Ve=ye.exports;m()(ye,{VApp:p["a"],VBtn:b["a"],VCard:G["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VDataTable:ue["a"],VDialog:ve["a"],VForm:H["a"],VIcon:_["a"],VOverlay:me["a"],VProgressCircular:pe["a"],VRow:U["a"],VSelect:fe["a"],VSnackbar:W["a"],VSpacer:I["a"],VTextField:J["a"],VTextarea:ge["a"],VTooltip:he["a"]});var Ce={},Te=Object(u["a"])(Ce,_e,we,!1,null,null,null),Ie=Te.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-row",{staticClass:"mb-5"},[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[e._v(" 用户中心 ")]),a("v-card-subtitle",[e._v(" User Center ")]),a("v-card-text",[e._v(" 欢迎回来，"+e._s(e.username)+" ")])],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[e._v(" 修改密码 ")]),a("v-card-subtitle",[e._v(" Change Password ")]),a("v-card-text",[a("v-form",{ref:"changeForm"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"原密码",required:"",type:"password"},model:{value:e.oldPw,callback:function(t){e.oldPw=t},expression:"oldPw"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"新密码",required:"",type:"password"},model:{value:e.newPw,callback:function(t){e.newPw=t},expression:"newPw"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{rules:e.confirmPwRules,label:"确认新密码",required:"",type:"password"},model:{value:e.confirmNewPw,callback:function(t){e.confirmNewPw=t},expression:"confirmNewPw"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{block:"",color:"info",loading:e.changeLoading},on:{click:e.changePassword}},[e._v("修改")])],1)],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[e._v(" 密钥管理 ")]),a("v-card-subtitle",[e._v(" Secret Manger ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:function(t){e.addSecretDialog=!0}}},[e._v(" 添加 ")]),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.addSecretDialog,callback:function(t){e.addSecretDialog=t},expression:"addSecretDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("添加密钥")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"addForm"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"名称",required:""},model:{value:e.secretName,callback:function(t){e.secretName=t},expression:"secretName"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"密钥ID",required:""},model:{value:e.secretId,callback:function(t){e.secretId=t},expression:"secretId"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.formRequired,label:"密钥",required:""},model:{value:e.secret,callback:function(t){e.secret=t},expression:"secret"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.addSecretDialog=!1}}},[e._v(" 取消 ")]),a("v-btn",{attrs:{loading:e.addLoading,color:"blue darken-1",text:""},on:{click:e.addSecret}},[e._v(" 添加 ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:function(t){return e.refresh()}}},[e._v(" 刷新 ")])],1),a("v-spacer")],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{"disable-sort":"","footer-props":{itemsPerPageText:"每页密钥数"},headers:e.headers,items:e.secrets,"items-per-page":5,loading:e.secretsLoading,"loading-text":"正在加载..."},scopedSlots:e._u([{key:"item.action",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.deleteSecrets(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[e._v("删除")])])]}}])},[a("template",{slot:"no-data"},[a("div",[e._v("无任何密钥")])])],2)],1)],1)],1)],1)],1)],1),a("v-overlay",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.message=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[e._v(" "+e._s(e.messageText)+" ")])],1)],1)},De=[],Pe=(a("159b"),{name:"user",metaInfo:{title:"用户中心 - AWS Panel"},data:function(){var e=this;return{username:"未知用户",oldPw:"",newPw:"",confirmNewPw:"",formRequired:[function(e){return!!e||"必填项！"}],confirmPwRules:[function(e){return!!e||"必填项!"},function(t){return t===e.newPw||"密码不匹配"}],changeLoading:!1,addSecretDialog:!1,secretName:null,secretId:null,secret:null,addLoading:!1,headers:[{text:"操作",value:"action"},{text:"密钥名称",value:"name"}],secrets:[],secretsLoading:!1,messageText:"",message:!1,loading:!1}},mounted:function(){var e=this;l.get("/api/v1/User/Info",{withCredentials:!0}).then((function(t){e.username=t.data.name})),l.get("/api/v1/Secret/List",{withCredentials:!0}).then((function(t){var a,n=[],s=Object(oe["a"])(t.data.data);try{for(s.s();!(a=s.n()).done;){var r=a.value;n.push({name:r.name,id:r.id,secret:r.secret}),e.secrets=n}}catch(o){s.e(o)}finally{s.f()}}))},methods:{refresh:function(){var e=this;this.secretsLoading=!0,l.get("/api/v1/Secret/List",{withCredentials:!0}).then((function(t){var a=[];null!=t.data.data&&t.data.data.forEach((function(e){a.push({name:e.name,id:e.id,secret:e.secret})})),e.secrets=a})).finally((function(){e.secretsLoading=!1}))},changePassword:function(){var e=this;if(this.$refs.changeForm.validate()){this.changeLoading=!0;var t=new FormData;t.append("oldPassword",this.oldPw),t.append("newPassword",this.newPw),l.post("/api/v1/User/ChangePassword",t,{withCredentials:!0}).then((function(t){200===t.data.code?(e.$cookie.delete("usersession"),e.messageText="修改成功！",e.message=!0,setTimeout((function(){e.$router.push("/Login")}),2e3)):e.messageText=t.data.msg})).finally((function(){e.$refs.changeForm.reset(),e.changeLoading=!1,e.message=!0}))}},deleteSecrets:function(e){var t=this;this.loading=!0;var a=new FormData;a.append("name",e.name),l.post("api/v1/Secret/Delete",a,{withCredentials:!0}).then((function(e){200===e.data.code?t.messageText="删除成功！":t.messageText=e.data.msg})).finally((function(){t.loading=!1,t.message=!0,t.refresh()}))},addSecret:function(){var e=this;this.addLoading=!0;var t=new FormData;t.append("name",this.secretName),t.append("id",this.secretId),t.append("secret",this.secret),l.post("api/v1/Secret/Add",t,{withCredentials:!0}).then((function(t){200===t.data.code?e.messageText="添加成功":e.messageText=t.data.msg})).finally((function(){e.$refs.addForm.reset(),e.addLoading=!1,e.addSecretDialog=!1,e.message=!0,e.refresh()}))}}}),Ne=Pe,Ae=Object(u["a"])(Ne,Le,De,!1,null,null,null),Re=Ae.exports;m()(Ae,{VApp:p["a"],VBtn:b["a"],VCard:G["a"],VCardActions:M["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VDataTable:ue["a"],VDialog:ve["a"],VForm:H["a"],VIcon:_["a"],VOverlay:me["a"],VProgressCircular:pe["a"],VRow:U["a"],VSnackbar:W["a"],VSpacer:I["a"],VTextField:J["a"],VTooltip:he["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-card",[a("v-card-title",[e._v(" 用户列表 ")]),a("v-card-subtitle",[e._v(" User List ")]),a("v-card-text",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{color:"info"},on:{click:e.refresh}},[e._v("刷新")])],1),a("v-spacer"),a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{"disable-sort":"","footer-props":{itemsPerPageText:"每页用户数"},headers:e.headers,items:e.users,"items-per-page":5,loading:e.userLoading,"loading-text":"正在加载..."},scopedSlots:e._u([{key:"item.Action",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.deleteUser(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[e._v("删除")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.banUser(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-lock")])],1)]}}],null,!0)},[a("span",[e._v("封禁")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"info",icon:""},on:{click:function(t){return e.unBanUser(n)}}},"v-btn",r,!1),s),[a("v-icon",[e._v("mdi-lock-open")])],1)]}}],null,!0)},[a("span",[e._v("解封")])])]}}])},[a("template",{slot:"no-data"},[a("div",[e._v("无任何用户")])])],2)],1)],1)],1)],1)],1),a("v-overlay",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"info",text:""},on:{click:function(t){e.message=!1}}},"v-btn",n,!1),[e._v(" Close ")])]}}]),model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[e._v(" "+e._s(e.messageText)+" ")])],1)],1)},qe=[],$e={name:"user",metaInfo:{title:"管理中心 - AWS Panel"},data:function(){return{loading:!1,message:!1,messageText:"",formRequired:[function(e){return!!e||"必填项！"}],addUserDialog:!1,addUserName:"",addPassword:"",addConfirmPassword:"",addLoading:!1,userLoading:!1,headers:[{text:"操作",value:"Action"},{text:"用户名",value:"UserName"},{text:"状态",value:"Status"},{text:"管理权限",value:"IsAdmin"}],users:[]}},methods:{refresh:function(){var e=this;this.userLoading=!0,l.get("/api/v1/User/List").then((function(t){if(200===t.data.code){var a,n=[],s=Object(oe["a"])(t.data.data);try{for(s.s();!(a=s.n()).done;){var r=a.value;n.push({UserName:r.UserName,Status:r.Status?"封禁":"正常",IsAdmin:r.IsAdmin?"是":"否"})}}catch(o){s.e(o)}finally{s.f()}e.users=n}else console.log("list user list error: ",t.data.msg)})).finally((function(){e.userLoading=!1}))},deleteUser:function(e){var t=this,a=new FormData;a.append("username",e.UserName),l.post("/api/v1/User/Delete",a).then((function(e){t.messageText=e.data.msg,t.message=!0})).finally((function(){t.refresh()}))},banUser:function(e){var t=this,a=new FormData;a.append("username",e.UserName),l.post("/api/v1/User/Ban",a).then((function(e){t.messageText=e.data.msg,t.message=!0})).finally((function(){t.refresh()}))},unBanUser:function(e){var t=this,a=new FormData;a.append("username",e.UserName),l.post("/api/v1/User/UnBan",a).then((function(e){t.messageText=e.data.msg,t.message=!0})).finally((function(){t.refresh()}))}},mounted:function(){this.refresh()}},Ue=$e,je=Object(u["a"])(Ue,Fe,qe,!1,null,null,null),Ke=je.exports;m()(je,{VApp:p["a"],VBtn:b["a"],VCard:G["a"],VCardSubtitle:M["b"],VCardText:M["c"],VCardTitle:M["d"],VCol:q["a"],VContainer:x["a"],VDataTable:ue["a"],VIcon:_["a"],VOverlay:me["a"],VProgressCircular:pe["a"],VRow:U["a"],VSnackbar:W["a"],VSpacer:I["a"],VTooltip:he["a"]}),n["a"].use(P["a"]);var Oe=[{path:"/",name:"Home",component:K},{path:"/Login",name:"Login",component:Z},{path:"/Register",name:"Register",component:ne},{path:"/Instance",name:"Instance",component:Ve,meta:{needLogin:!0}},{path:"/User",name:"User",component:Re,meta:{needLogin:!0}},{path:"/Quota",name:"Quota",component:Ie,meta:{needLogin:!0}},{path:"/Manger",name:"Manger",component:Ke,meta:{needLogin:!0}}],Be=new P["a"]({mode:"history",base:"/",routes:Oe});function Ee(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t}Be.beforeEach((function(e,t,a){e.meta.needLogin?Ee("loginSession")?a():a({path:"/login"}):a()}));var ze=Be,Ge=a("f309");n["a"].use(Ge["a"]);var Me=new Ge["a"]({breakpoint:{mobileBreakpoint:"sm"}}),He=a("58ca"),We=a("00e7"),Je=a.n(We);n["a"].use(Je.a,He["a"]),n["a"].config.productionTip=!1,new n["a"]({vuetify:Me,router:ze,render:function(e){return e(D)}}).$mount("#app")},"942d":function(e,t,a){e.exports=a.p+"img/aws.a7e580cb.png"}});
//# sourceMappingURL=app.e63b961e.js.map